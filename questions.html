<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MBTI Matchmaker</title>
    <script>
        async function saveUserData() {
            let firstname = document.getElementById("firstname").value;
            let lastname = document.getElementById("lastname").value;
            let linkedin = document.getElementById("linkedin").value;
            let mbtiType = document.querySelector('input[firstname="mbtiType"]:checked').value;
            
            let userData = `${firstname},${lastname},${linkedin},${mbtiType}\n`;
            
            try {
                await fetch('UserData.txt', {
                    method: 'POST',
                    headers: { 'Content-Type': 'text/plain' },
                    body: userData
                });
            } catch (error) {
                console.error("Error saving data:", error);
            }
            
            displayUsersWithSameMBTI(mbtiType);
        }
        
        async function displayUsersWithSameMBTI(type) {
            let displayArea = document.getElementById("sameMbtiUsers");
            displayArea.innerHTML = "<h3>People with the same MBTI type:</h3>";
            
            try {
                let response = await fetch('UserData.txt');
                let data = await response.text();
                let users = data.trim().split('\n');
                
                users.forEach(user => {
                    let userData = user.split(',');
                    if (userData[3] === type) {
                        displayArea.innerHTML += `<p>First Name: ${userData[0]}, Last Name: ${userData[1]}, LinkedIn: <a href="${userData[2]}" target="_blank">${userData[2]}</a></p>`;
                    }
                });
            } catch (error) {
                console.error("Error reading data:", error);
            }
        }
    </script>
</head>
<body>
    <h1>Welcome to Connect Pitt!</h1>
    <p>Find your personality type on the matchmaker app to simplify the complexities of finding a roommate, study buddy, friend, or even a love interest!</p>
    
    <form onsubmit="event.preventDefault(); saveUserData();">
        <label for="firstname">What is your first name?</label>
        <input type="text" id="firstname" required><br><br>

        <label for="lastname">What is your last name?</label>
        <input type="text" id="lastname" required><br><br>

        <p>You would rather have the superpower of teleportation than telekinesis:</p>
        <input type="radio" id="Sensing" value="Sensing" required>
        <label for="Sensing">5</label><br>
        <input type="radio" id="Sensing" value="Sensing" required>
        <label for="Sensing">4</label><br>
        <input type="radio" id="Sensing" value="Sensing" required>
        <label for="Sensing">3</label><br>
        <input type="radio" id="Thinking" value="Thinking" required>
        <label for="Thinking">2</label><br>
        <input type="radio" id="Thinking" value="Thinking" required>
        <label for="Thinking">1</label><br>
        <input type="radio" id="Thinking" value="Thinking" required>
        <label for="Thinking">0</label><br>

        <p>You would rather accept your perceived reality than know the truth</p>
        <input type="radio" id="Thinking" value="Thinking" required>
        <label for="Thinking">5</label><br>
        <input type="radio" id="Thinking" value="Thinking" required>
        <label for="Thinking">4</label><br>
        <input type="radio" id="Thinking" value="Thinking" required>
        <label for="Thinking">3</label><br>
        <input type="radio" id="Sensing" value="Sensing" required>
        <label for="Sensing">2</label><br>
        <input type="radio" id="Sensing" value="Sensing" required>
        <label for="Sensing">1</label><br>
        <input type="radio" id="Sensing" value="Sensing" required>
        <label for="Sensing">0</label><br>
        
        <p>You tend to trust strangers</p>
        <input type="radio" id="Rational" value="Rational" required>
        <label for="Rational">5</label><br
        <input type="radio" id="Rational" value="Rational" required>
        <label for="Rational">4</label><br>
        <input type="radio" id="Rational" value="Rational" required>
        <label for="Rational">3</label><br>
        <input type="radio" id="Logical" value="Logical" required>
        <label for="Logical">2</label><br>
        <input type="radio" id="Logical" value="Logical" required>
        <label for="Logical">1</label><br>
        <input type="radio" id="Logical" value="Logical" required>
        <label for="Logical">0</label><br>

        <p>In arguments, you tend to use facts over feelings</p>
        <input type="radio" id="Logical" value="Logical" required>
        <label for="Logical">5</label><br>
        <input type="radio" id="Logical" value="Logical" required>
        <label for="Logical">4</label><br>
        <input type="radio" id="Logical" value="Logical" required>
        <label for="Logical">3</label><br>
        <input type="radio" id="Rational" value="Rational" required>
        <label for="Rational">2</label><br>
        <input type="radio" id="Rational" value="Rational" required>
        <label for="Rational">1</label><br>
        <input type="radio" id="Rational" value="Rational" required>
        <label for="Rational">0</label><br>

        <p>You would rather live in a city than a suburban expanse</p>
        <input type="radio" id="Assertive" value="Assertive" required>
        <label for="Assertive">5</label><br>
        <input type="radio" id="Assertive" value="Assertive" required>
        <label for="Assertive">4</label><br>
        <input type="radio" id="Assertive" value="Assertive" required>
        <label for="Assertive">3</label><br>
        <input type="radio" id="Passive" value="Passive" required>
        <label for="Passive">2</label><br>
        <input type="radio" id="Passive" value="Passive" required>
        <label for="Passive">1</label><br>
        <input type="radio" id="Passive" value="Passive" required>
        <label for="Passive">0</label><br>

        <p>Owning a cat is something that interests you</p>
        <input type="radio" id="Passive" value="Passive" required>
        <label for="Passive">5</label><br>
        <input type="radio" id="Passive" value="Passive" required>
        <label for="Passive">4</label><br>
        <input type="radio" id="Passive" value="Passive" required>
        <label for="Passive">3</label><br>
        <input type="radio" id="Assertive" value="Assertive" required>
        <label for="Assertive">2</label><br>
        <input type="radio" id="Assertive" value="Assertive" required>
        <label for="Assertive">1</label><br>
        <input type="radio" id="Assertive" value="Assertive" required>
        <label for="Assertive">0</label><br>

        <button type="submit">Submit</button>
    </form>
    
    <div id="sameMbtiUsers"></div>
</body>
</html>
